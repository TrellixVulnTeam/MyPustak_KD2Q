{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\Instagram Clone\\\\client\\\\src\\\\components\\\\screens\\\\UserProfile.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable jsx-a11y/alt-text */\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { UserContext } from '../../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  const [UserProfile, setProfile] = useState(null);\n  const [showFollow, setShowFollow] = useState(true);\n  const {\n    state,\n    dispatch\n  } = useContext(UserContext);\n  const {\n    userid\n  } = useParams();\n  useEffect(() => {\n    fetch('/user/' + userid, {\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json()).then(result => {\n      // console.log(result);\n      setProfile(result);\n    });\n  }, []);\n\n  const followUser = () => {\n    fetch('/follow', {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        followId: userid\n      })\n    }).then(res => res.json()).then(data => {\n      // console.log(\"ye userprofile waala data hain \", data);\n      dispatch({\n        type: \"UPDATE\",\n        payload: {\n          following: data.following,\n          followers: data.followers\n        }\n      });\n      localStorage.setItem(\"user\", JSON.stringify(data)); //using call back method for setProfile method \n\n      setProfile(prevState => {\n        return { //expanding previous state\n          ...prevState,\n          user: { ...prevState.user,\n            followers: [...prevState.user.followers, data._id]\n          }\n        };\n      });\n      setShowFollow(false);\n    });\n  };\n\n  const unfollowUser = () => {\n    fetch('/unfollow', {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        unfollowId: userid\n      })\n    }).then(res => res.json()).then(data => {\n      // console.log(\"ye userprofile waala data hain \", data);\n      dispatch({\n        type: \"UPDATE\",\n        payload: {\n          following: data.following,\n          followers: data.followers\n        }\n      });\n      localStorage.setItem(\"user\", JSON.stringify(data)); //using call back method for setProfile method \n\n      setProfile(prevState => {\n        const newFollowers = prevState.user.followers.filter(item => item != data._id);\n        return { //expanding previous state\n          ...prevState,\n          user: { ...prevState.user,\n            followers: newFollowers\n          }\n        };\n      }); // setShowFollow(true);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: UserProfile ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-top-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"profile-image\",\n            src: \"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: UserProfile.user.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: UserProfile.user.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-data\",\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [UserProfile.posts.length, \" posts\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [UserProfile.user.followers.length, \" followers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [UserProfile.user.following.length, \" following\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 33\n          }, this), showFollow ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn waves-effect waves-light #42a5f5 blue darken-1\",\n            onClick: () => followUser(),\n            children: \"FOLLOW\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 41\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn waves-effect waves-light #42a5f5 blue darken-1\",\n            onClick: () => unfollowUser(),\n            children: \"UNFOLLOW\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"gallery\",\n        children: UserProfile.posts.map(item => {\n          return /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"item\",\n            src: item.photo,\n            alt: item.title\n          }, item._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 41\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"loading......\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }, this)\n  }, void 0, false);\n};\n\n_s(Profile, \"EHOyPlfSJGUuTNSybwaVuNiSZeE=\", false, function () {\n  return [useParams];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["E:/Projects/Instagram Clone/client/src/components/screens/UserProfile.js"],"names":["React","useContext","useEffect","useState","useParams","UserContext","Profile","UserProfile","setProfile","showFollow","setShowFollow","state","dispatch","userid","fetch","headers","localStorage","getItem","then","res","json","result","followUser","method","body","JSON","stringify","followId","data","type","payload","following","followers","setItem","prevState","user","_id","unfollowUser","unfollowId","newFollowers","filter","item","name","email","posts","length","map","photo","title"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable jsx-a11y/alt-text */\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { useParams } from 'react-router';\r\nimport { UserContext } from '../../App';\r\n\r\nconst Profile = () => {\r\n    const [UserProfile, setProfile] = useState(null);\r\n    const [showFollow, setShowFollow] = useState(true);\r\n\r\n    const { state, dispatch } = useContext(UserContext);\r\n    const { userid } = useParams();\r\n\r\n    useEffect(() => {\r\n        fetch('/user/' + userid, {\r\n            headers: {\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                // console.log(result);\r\n                setProfile(result);\r\n            })\r\n    }, []);\r\n\r\n    const followUser = () => {\r\n        fetch('/follow', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            },\r\n            body: JSON.stringify({\r\n                followId: userid\r\n            })\r\n        }).then(res => res.json())\r\n            .then(data => {\r\n                // console.log(\"ye userprofile waala data hain \", data);\r\n                dispatch({ type: \"UPDATE\", payload: { following: data.following, followers: data.followers } })\r\n                localStorage.setItem(\"user\", JSON.stringify(data));\r\n\r\n                //using call back method for setProfile method \r\n                setProfile((prevState) => {\r\n                    return {\r\n                        //expanding previous state\r\n                        ...prevState,\r\n                        user: {\r\n                            ...prevState.user,\r\n                            followers: [...prevState.user.followers, data._id]\r\n                        }\r\n                    }\r\n                })\r\n\r\n                setShowFollow(false);\r\n            })\r\n    };\r\n\r\n    const unfollowUser = () => {\r\n        fetch('/unfollow', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            },\r\n            body: JSON.stringify({\r\n                unfollowId: userid\r\n            })\r\n        }).then(res => res.json())\r\n            .then(data => {\r\n                // console.log(\"ye userprofile waala data hain \", data);\r\n                dispatch({ type: \"UPDATE\", payload: { following: data.following, followers: data.followers } })\r\n                localStorage.setItem(\"user\", JSON.stringify(data));\r\n\r\n                //using call back method for setProfile method \r\n                setProfile((prevState) => {\r\n                    const newFollowers = prevState.user.followers.filter(item => item != data._id);\r\n                    return {\r\n                        //expanding previous state\r\n                        ...prevState,\r\n                        user: {\r\n                            ...prevState.user,\r\n                            followers: newFollowers\r\n                        }\r\n                    }\r\n                })\r\n                // setShowFollow(true);\r\n            })\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {\r\n                UserProfile ?\r\n                    <div className=\"profile\">\r\n                        <div className=\"profile-top-container\">\r\n                            <div>\r\n                                <img className=\"profile-image\"\r\n                                    src=\"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <h4>{UserProfile.user.name}</h4>\r\n                                <h6>{UserProfile.user.email}</h6>\r\n                                <div className=\"profile-data\">\r\n                                    <h6>{UserProfile.posts.length} posts</h6>\r\n                                    <h6>{UserProfile.user.followers.length} followers</h6>\r\n                                    <h6>{UserProfile.user.following.length} following</h6>\r\n                                </div>\r\n                                {\r\n                                    showFollow ?\r\n                                        <button className=\"btn waves-effect waves-light #42a5f5 blue darken-1\"\r\n                                            onClick={() => followUser()}\r\n                                        >\r\n                                            FOLLOW\r\n                                    </button>\r\n                                        :\r\n                                        <button className=\"btn waves-effect waves-light #42a5f5 blue darken-1\"\r\n                                            onClick={() => unfollowUser()}\r\n                                        >\r\n                                            UNFOLLOW\r\n                                    </button>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"gallery\">\r\n                            {\r\n                                UserProfile.posts.map(item => {\r\n                                    return (\r\n                                        <img className=\"item\" src={item.photo} alt={item.title} key={item._id} />\r\n                                    )\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    :\r\n                    <h2>loading......</h2>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Profile"]},"metadata":{},"sourceType":"module"}