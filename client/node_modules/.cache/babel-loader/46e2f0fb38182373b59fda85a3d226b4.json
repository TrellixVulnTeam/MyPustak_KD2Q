{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\Instagram Clone\\\\client\\\\src\\\\components\\\\screens\\\\UserProfile.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable jsx-a11y/alt-text */\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { UserContext } from '../../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  const [UserProfile, setProfile] = useState(null);\n  const {\n    state,\n    dispatch\n  } = useContext(UserContext);\n  const {\n    userid\n  } = useParams();\n  useEffect(() => {\n    fetch('/user/' + userid, {\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json()).then(result => {\n      // console.log(result);\n      setProfile(result);\n    });\n  }, []);\n\n  const followUser = () => {\n    fetch('/follow', {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        followId: userid\n      })\n    }).then(res => res.json()).then(data => {\n      console.log(\"ye userprofile waala data hain \", data);\n      dispatch({\n        type: \"UPDATE\",\n        payload: {\n          following: data.following,\n          followers: data.followers\n        }\n      });\n      localStorage.setItem(\"user\", JSON.stringify(data)); //using call back method for setProfile method \n\n      setProfile(prevState => {\n        return { //expanding previous state\n          ...prevState,\n          user: { ...prevState.user,\n            followers: [...prevState.user.followers, data._id]\n          }\n        };\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: UserProfile ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-top-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"profile-image\",\n            src: \"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: UserProfile.user.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: UserProfile.user.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-data\",\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [UserProfile.posts.length, \" posts\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [UserProfile.user.followers.length, \" followers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [UserProfile.user.following.length, \" following\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn waves-effect waves-light #42a5f5 blue darken-1\",\n            onClick: () => followUser(),\n            children: \"FOLLOW\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"gallery\",\n        children: UserProfile.posts.map(item => {\n          return /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"item\",\n            src: item.photo,\n            alt: item.title\n          }, item._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 41\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"loading......\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }, this)\n  }, void 0, false);\n};\n\n_s(Profile, \"kqPizEF69Q2pdPFcn0VNaVVfEso=\", false, function () {\n  return [useParams];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["E:/Projects/Instagram Clone/client/src/components/screens/UserProfile.js"],"names":["React","useContext","useEffect","useState","useParams","UserContext","Profile","UserProfile","setProfile","state","dispatch","userid","fetch","headers","localStorage","getItem","then","res","json","result","followUser","method","body","JSON","stringify","followId","data","console","log","type","payload","following","followers","setItem","prevState","user","_id","name","email","posts","length","map","item","photo","title"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable jsx-a11y/alt-text */\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { useParams } from 'react-router';\r\nimport { UserContext } from '../../App';\r\n\r\nconst Profile = () => {\r\n    const [UserProfile, setProfile] = useState(null);\r\n    const { state, dispatch } = useContext(UserContext);\r\n    const { userid } = useParams();\r\n\r\n    useEffect(() => {\r\n        fetch('/user/' + userid, {\r\n            headers: {\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                // console.log(result);\r\n                setProfile(result);\r\n            })\r\n    }, []);\r\n\r\n    const followUser = () => {\r\n        fetch('/follow', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            },\r\n            body: JSON.stringify({\r\n                followId: userid\r\n            })\r\n        }).then(res => res.json())\r\n            .then(data => {\r\n                console.log(\"ye userprofile waala data hain \", data);\r\n                dispatch({ type: \"UPDATE\", payload: { following: data.following, followers: data.followers } })\r\n                localStorage.setItem(\"user\", JSON.stringify(data));\r\n\r\n                //using call back method for setProfile method \r\n                setProfile((prevState) =>{\r\n                    return {\r\n                        //expanding previous state\r\n                        ...prevState,\r\n                        user:{\r\n                            ...prevState.user,\r\n                            followers:[...prevState.user.followers,data._id]\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n    };\r\n    return (\r\n        <>\r\n            {\r\n                UserProfile ?\r\n                    <div className=\"profile\">\r\n                        <div className=\"profile-top-container\">\r\n                            <div>\r\n                                <img className=\"profile-image\"\r\n                                    src=\"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <h4>{UserProfile.user.name}</h4>\r\n                                <h6>{UserProfile.user.email}</h6>\r\n                                <div className=\"profile-data\">\r\n                                    <h6>{UserProfile.posts.length} posts</h6>\r\n                                    <h6>{UserProfile.user.followers.length} followers</h6>\r\n                                    <h6>{UserProfile.user.following.length} following</h6>\r\n                                </div>\r\n                                <button className=\"btn waves-effect waves-light #42a5f5 blue darken-1\"\r\n                                    onClick={() => followUser()}\r\n                                >\r\n                                    FOLLOW\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"gallery\">\r\n                            {\r\n                                UserProfile.posts.map(item => {\r\n                                    return (\r\n                                        <img className=\"item\" src={item.photo} alt={item.title} key={item._id} />\r\n                                    )\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    :\r\n                    <h2>loading......</h2>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Profile"]},"metadata":{},"sourceType":"module"}