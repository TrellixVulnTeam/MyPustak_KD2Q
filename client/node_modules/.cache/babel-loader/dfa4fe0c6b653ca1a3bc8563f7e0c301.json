{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\Instagram Clone\\\\server\\\\client\\\\src\\\\components\\\\screens\\\\UserProfile.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable jsx-a11y/alt-text */\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { UserContext } from '../../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  const [userProfile, setProfile] = useState(null);\n  const {\n    userid\n  } = useParams();\n  const {\n    state,\n    dispatch\n  } = useContext(UserContext);\n  const [showFollow, setShowFollow] = useState(state ? !state.following.includes(userid) : true);\n  useEffect(() => {\n    fetch('/user/' + userid, {\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json()).then(result => {\n      // console.log(result);\n      setProfile(result);\n    });\n  }, []);\n\n  const followUser = () => {\n    fetch('/follow', {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem('jwt')\n      },\n      body: JSON.stringify({\n        followId: userid\n      })\n    }).then(res => res.json()).then(data => {\n      dispatch({\n        type: \"UPDATE\",\n        payload: {\n          following: data.following,\n          followers: data.followers\n        }\n      });\n      localStorage.setItem(\"user\", JSON.stringify(data));\n      setProfile(prevState => {\n        return { ...prevState,\n          user: { ...prevState.user,\n            followers: [...prevState.user.followers, data._id]\n          }\n        };\n      });\n      setShowFollow(false);\n    });\n  };\n\n  const unfollowUser = () => {\n    fetch('/unfollow', {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem('jwt')\n      },\n      body: JSON.stringify({\n        unfollowId: userid\n      })\n    }).then(res => res.json()).then(data => {\n      dispatch({\n        type: \"UPDATE\",\n        payload: {\n          following: data.following,\n          followers: data.followers\n        }\n      });\n      localStorage.setItem(\"user\", JSON.stringify(data));\n      setProfile(prevState => {\n        const newFollower = prevState.user.followers.filter(item => item !== data._id);\n        return { ...prevState,\n          user: { ...prevState.user,\n            followers: newFollower\n          }\n        };\n      });\n      setShowFollow(true);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: userProfile ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-top-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"profile-image\",\n            src: userProfile.user.pic\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: userProfile.user.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: userProfile.user.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-data\",\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [userProfile.posts.length, \" posts\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [userProfile.user.followers.length, \" followers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [userProfile.user.following.length, \" following\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 33\n          }, this), showFollow ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn waves-effect waves-light #42a5f5 blue darken-1\",\n            onClick: () => followUser(),\n            children: \"FOLLOW\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 41\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn waves-effect waves-light #42a5f5 blue darken-1\",\n            onClick: () => unfollowUser(),\n            children: \"UNFOLLOW\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"gallery\",\n        children: userProfile.posts.map(item => {\n          return /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"item\",\n            src: item.photo,\n            alt: item.title\n          }, item._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 41\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"progress\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"indeterminate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }, this)\n  }, void 0, false);\n};\n\n_s(Profile, \"KT0/oTVm+FWXyjwEW+GLQiRKSxc=\", false, function () {\n  return [useParams];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["E:/Projects/Instagram Clone/server/client/src/components/screens/UserProfile.js"],"names":["React","useContext","useEffect","useState","useParams","UserContext","Profile","userProfile","setProfile","userid","state","dispatch","showFollow","setShowFollow","following","includes","fetch","headers","localStorage","getItem","then","res","json","result","followUser","method","body","JSON","stringify","followId","data","type","payload","followers","setItem","prevState","user","_id","unfollowUser","unfollowId","newFollower","filter","item","pic","name","email","posts","length","map","photo","title"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable jsx-a11y/alt-text */\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { useParams } from 'react-router';\r\nimport { UserContext } from '../../App';\r\n\r\nconst Profile = () => {\r\n    const [userProfile, setProfile] = useState(null);\r\n\r\n    const { userid } = useParams();\r\n    const { state, dispatch } = useContext(UserContext);\r\n\r\n    const [showFollow, setShowFollow] = useState(state ? !state.following.includes(userid) : true);\r\n\r\n    useEffect(() => {\r\n        fetch('/user/' + userid, {\r\n            headers: {\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                // console.log(result);\r\n                setProfile(result);\r\n            })\r\n    }, []);\r\n\r\n    const followUser = () => {\r\n        fetch('/follow', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem('jwt')\r\n            },\r\n            body: JSON.stringify({\r\n                followId: userid\r\n            })\r\n        }).then(res => res.json())\r\n            .then(data => {\r\n\r\n                dispatch({ type: \"UPDATE\", payload: { following: data.following, followers: data.followers } })\r\n                localStorage.setItem(\"user\", JSON.stringify(data))\r\n                setProfile((prevState) => {\r\n                    return {\r\n                        ...prevState,\r\n                        user: {\r\n                            ...prevState.user,\r\n                            followers: [...prevState.user.followers, data._id]\r\n                        }\r\n                    }\r\n                })\r\n                setShowFollow(false)\r\n            })\r\n    }\r\n\r\n    const unfollowUser = () => {\r\n        fetch('/unfollow', {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": \"Bearer \" + localStorage.getItem('jwt')\r\n            },\r\n            body: JSON.stringify({\r\n                unfollowId: userid\r\n            })\r\n        }).then(res => res.json())\r\n            .then(data => {\r\n\r\n                dispatch({ type: \"UPDATE\", payload: { following: data.following, followers: data.followers } })\r\n                localStorage.setItem(\"user\", JSON.stringify(data))\r\n\r\n                setProfile((prevState) => {\r\n                    const newFollower = prevState.user.followers.filter(item => item !== data._id)\r\n                    return {\r\n                        ...prevState,\r\n                        user: {\r\n                            ...prevState.user,\r\n                            followers: newFollower\r\n                        }\r\n                    }\r\n                })\r\n                setShowFollow(true)\r\n\r\n            })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {\r\n                userProfile ?\r\n                    <div className=\"profile\">\r\n                        <div className=\"profile-top-container\">\r\n                            <div>\r\n                                <img className=\"profile-image\"\r\n                                    src={userProfile.user.pic}\r\n                                />\r\n                            </div>\r\n                            <div >\r\n                                <h4>{userProfile.user.name}</h4>\r\n                                <h6>{userProfile.user.email}</h6>\r\n                                <div className=\"profile-data\">\r\n                                    <h6>{userProfile.posts.length} posts</h6>\r\n                                    <h6>{userProfile.user.followers.length} followers</h6>\r\n                                    <h6>{userProfile.user.following.length} following</h6>\r\n                                </div>\r\n                                {\r\n                                    showFollow ?\r\n                                        <button className=\"btn waves-effect waves-light #42a5f5 blue darken-1\"\r\n                                            onClick={() => followUser()}\r\n                                        >\r\n                                            FOLLOW\r\n                                        </button>\r\n                                        :\r\n                                        <button className=\"btn waves-effect waves-light #42a5f5 blue darken-1\"\r\n                                            onClick={() => unfollowUser()}\r\n                                        >\r\n                                            UNFOLLOW\r\n                                        </button>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"gallery\">\r\n                            {\r\n                                userProfile.posts.map(item => {\r\n                                    return (\r\n                                        <img className=\"item\" src={item.photo} alt={item.title} key={item._id} />\r\n                                    )\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    :\r\n                    <div className=\"progress\">\r\n                        <div className=\"indeterminate\"></div>\r\n                    </div>\r\n\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Profile"]},"metadata":{},"sourceType":"module"}